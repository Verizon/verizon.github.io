import { calculateRem } from '@uie/javascript-style-helpers';

export const updateDialogPosition = props => {
  const {
    isDialogOnTop,
    customAnchorElement,
    customAnchorPresent,
    offset,
    size,
    inverted,
  } = props;

  if (!customAnchorPresent) {
    if (isDialogOnTop) {
      /* styles for when dialog is above anchor and no customAnchorElement */
      return `
          bottom: ${calculateRem(size === 'small' ? 27 : 30)};
        &::after {
          transform: translate(-50%) rotate(225deg) !important;
        };
        `;
    }

    /* styles for when dialog is below anchor and no customAnchorElement */
    return `
        top: ${calculateRem(size === 'small' ? 27 : 30)};
        &::before {
          top: ${calculateRem(inverted ? -3 : -5)};
          transform: translate(-50%) rotate(225deg) !important;
        };
      `;
  }

  if (customAnchorPresent) {
    if (isDialogOnTop) {
      /* styles for when dialog is above anchor and customAnchorElement */
      return `
        left: ${calculateRem(
          Math.round(customAnchorElement.getBoundingClientRect().width / 2)
        )};
          bottom: ${calculateRem(
            customAnchorElement.getBoundingClientRect().height + 6
          )};
        `;
    }

    /* styles for when dialog is below anchor and customAnchorElement */
    return `
      left: ${calculateRem(
        Math.round(customAnchorElement.getBoundingClientRect().width / 2)
      )};
      top: ${calculateRem(
        customAnchorElement.getBoundingClientRect().height + offset + 8
      )};

        &::before {
          top: ${calculateRem(inverted ? -3 : -5)};
          transform: translate(-50%) rotate(225deg) !important;
        };
      `;
  }
};
